<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wellsafer - ìŠ¤ë§ˆíŠ¸ë°´ë“œ ê¸°ë°˜ ì‹ ê²½ìê·¹ í”Œë«í¼</title>
  <link href="https://cdn.jsdelivr.net/npm/vuetify@2.6.0/dist/vuetify.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    * { font-family: 'Noto Sans KR', sans-serif; }
    body { margin: 0; background: #F2F9F5; }
    
    /* Theme Colors */
    .bg-primary { background-color: #F2F9F5 !important; }
    .bg-secondary { background-color: #43E396 !important; }
    .bg-point2 { background-color: #257E53 !important; }
    .bg-point { background-color: #9FE3BA !important; }
    .bg-thirdly { background-color: #63CC8D !important; }
    .text-point2 { color: #257E53 !important; }
    .text-secondary { color: #43E396 !important; }
    
    /* Navigation */
    .nav-drawer {
      width: 180px;
      background: #43E396;
      height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
      padding: 0;
      z-index: 100;
    }
    .nav-logo {
      padding: 20px 16px;
      text-align: center;
      color: white;
      font-size: 22px;
      font-weight: 700;
    }
    .nav-menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .nav-menu li {
      padding: 14px 20px;
      color: white;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 14px;
    }
    .nav-menu li:hover { background: rgba(255,255,255,0.1); }
    .nav-menu li.active { background: #257E53; }
    .nav-footer {
      position: absolute;
      bottom: 0;
      width: 100%;
      padding: 12px;
    }
    .nav-footer button {
      width: 100%;
      padding: 10px;
      margin-bottom: 8px;
      background: #257E53;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
    }
    .nav-footer button:hover { background: #1a5c3a; }
    
    /* Main Content */
    .main-content {
      margin-left: 180px;
      padding: 30px;
      min-height: 100vh;
      background: #F2F9F5;
    }
    
    /* Cards */
    .card {
      background: white;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.08);
      margin-bottom: 16px;
      overflow: hidden;
    }
    .card-header {
      padding: 8px 16px;
      font-weight: 600;
      font-size: 14px;
      border-bottom: 1px solid #eee;
    }
    .card-body { padding: 16px; }
    
    /* Grid System */
    .row {
      display: flex;
      flex-wrap: wrap;
      margin: -8px;
    }
    .col { padding: 8px; }
    .col-3 { width: 25%; }
    .col-4 { width: 33.333%; }
    .col-5 { width: 41.666%; }
    .col-6 { width: 50%; }
    .col-12 { width: 100%; }
    
    /* Tables */
    .table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    .table th {
      text-align: left;
      padding: 10px 12px;
      background: #fafafa;
      font-weight: 500;
      color: #666;
      border-bottom: 1px solid #eee;
    }
    .table td {
      padding: 10px 12px;
      border-bottom: 1px solid #f5f5f5;
    }
    .table tr:hover { background: #fafafa; }
    .table tr.clickable { cursor: pointer; }
    .table tr.clickable:hover { background: #e8f5e9; }
    
    /* Time Card */
    .time-card {
      height: 30vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .time-date { font-size: 16px; color: #333; margin-bottom: 8px; }
    .time-clock { font-size: 48px; font-weight: 700; color: #333; }
    
    /* Weather Card */
    .weather-card { height: 30vh; padding: 16px; }
    .weather-main {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
    }
    .weather-icon { font-size: 48px; color: #f59e0b; }
    .weather-temp { font-size: 36px; font-weight: 700; }
    .weather-desc { font-size: 14px; color: #666; }
    .weather-details {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      font-size: 13px;
    }
    .weather-detail-item { text-align: center; }
    .weather-detail-value { font-weight: 600; font-size: 16px; }
    .weather-detail-label { color: #666; font-size: 12px; }
    
    /* Vital Sign Card */
    .vitalsign-card { height: 30vh; }
    .vitalsign-list { max-height: calc(30vh - 50px); overflow-y: auto; }
    .vitalsign-item {
      display: flex;
      align-items: center;
      padding: 10px 16px;
      border-bottom: 1px solid #f5f5f5;
      gap: 12px;
    }
    .vitalsign-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }
    .vitalsign-dot.danger { background: #ef4444; }
    .vitalsign-dot.warning { background: #f59e0b; }
    
    /* Map Card */
    .map-card {
      height: 35vh;
      position: relative;
    }
    #map, #band-detail-map {
      width: 100%;
      height: 100%;
      border-radius: 4px;
    }
    .map-info {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background: white;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      z-index: 1000;
    }
    .map-legend {
      position: absolute;
      top: 10px;
      right: 10px;
      background: white;
      padding: 10px 14px;
      border-radius: 4px;
      font-size: 11px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      z-index: 1000;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }
    .legend-item:last-child { margin-bottom: 0; }
    .legend-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
    
    /* Event Card */
    .event-card { height: 29vh; }
    .event-table-wrap { max-height: calc(29vh - 50px); overflow-y: auto; }
    
    /* Chart Card */
    .chart-card { height: 29vh; }
    .chart-wrap { height: calc(29vh - 50px); padding: 8px; }
    
    /* Chips */
    .chip {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 500;
    }
    .chip-success { background: #10b981; color: white; }
    .chip-warning { background: #f59e0b; color: white; }
    .chip-error { background: #ef4444; color: white; }
    .chip-info { background: #3b82f6; color: white; }
    .chip-grey { background: #9ca3af; color: white; }
    .chip-secondary { background: #43E396; color: white; }
    .chip-point2 { background: #257E53; color: white; }
    .chip-outline {
      background: transparent;
      border: 1px solid #ddd;
      color: #666;
    }
    
    /* Buttons */
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .btn-primary { background: #257E53; color: white; }
    .btn-primary:hover { background: #1a5c3a; }
    .btn-outline { background: transparent; border: 1px solid #257E53; color: #257E53; }
    .btn-close {
      background: transparent;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
      padding: 4px 8px;
    }
    .btn-close:hover { color: #333; }
    
    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 20px;
    }
    .stat-card {
      background: white;
      border-radius: 4px;
      padding: 16px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.08);
      display: flex;
      align-items: center;
      gap: 14px;
    }
    .stat-card.green { border-left: 4px solid #43E396; }
    .stat-card.dark-green { border-left: 4px solid #257E53; }
    .stat-card.light-green { border-left: 4px solid #63CC8D; }
    .stat-card.mint { border-left: 4px solid #9FE3BA; }
    .stat-card.orange { border-left: 4px solid #f59e0b; }
    .stat-card.red { border-left: 4px solid #ef4444; }
    .stat-icon {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
    }
    .stat-value { font-size: 24px; font-weight: 700; }
    .stat-label { font-size: 12px; color: #666; margin-top: 2px; }
    
    /* Slider */
    .slider-container { padding: 8px 0; }
    .slider-label { font-size: 12px; color: #666; margin-bottom: 6px; }
    .slider {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: #e5e7eb;
      position: relative;
    }
    .slider-fill { height: 100%; background: #257E53; border-radius: 3px; }
    .slider-thumb {
      position: absolute;
      top: -7px;
      width: 20px;
      height: 20px;
      background: #257E53;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 9px;
    }
    
    /* Battery Bar */
    .battery-bar {
      width: 50px;
      height: 6px;
      background: #e5e7eb;
      border-radius: 3px;
      overflow: hidden;
    }
    .battery-fill { height: 100%; border-radius: 3px; }
    
    /* List Items */
    .list-item {
      display: flex;
      align-items: center;
      padding: 10px 16px;
      border-bottom: 1px solid #f5f5f5;
      gap: 10px;
    }
    .list-item:last-child { border-bottom: none; }
    .list-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }
    
    /* Page Header */
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .page-title { font-size: 18px; font-weight: 600; color: #257E53; }
    
    /* Hidden pages */
    .page { display: none; }
    .page.active { display: block; }
    
    /* Chart Container */
    .chart-container { position: relative; height: 100%; }

    /* Band Detail Slide Panel */
    .detail-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.3);
      z-index: 200;
    }
    .detail-overlay.active { display: block; }
    
    .detail-panel {
      position: fixed;
      top: 0;
      right: -500px;
      width: 480px;
      height: 100vh;
      background: white;
      box-shadow: -4px 0 20px rgba(0,0,0,0.15);
      z-index: 201;
      transition: right 0.3s ease;
      overflow-y: auto;
    }
    .detail-panel.active { right: 0; }
    
    .detail-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid #eee;
      background: #257E53;
      color: white;
    }
    .detail-header h2 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
    }
    .detail-header .btn-close { color: white; }
    .detail-header .btn-close:hover { color: #ddd; }
    
    .detail-body { padding: 20px; }
    
    .detail-section {
      margin-bottom: 24px;
    }
    .detail-section-title {
      font-size: 14px;
      font-weight: 600;
      color: #257E53;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 2px solid #43E396;
    }
    
    .detail-info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    .detail-info-item {
      background: #f9fafb;
      padding: 12px;
      border-radius: 6px;
    }
    .detail-info-label {
      font-size: 11px;
      color: #666;
      margin-bottom: 4px;
    }
    .detail-info-value {
      font-size: 16px;
      font-weight: 600;
    }
    
    .vitals-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    .vital-card {
      background: linear-gradient(135deg, #e8f5e9 0%, #f1f8f4 100%);
      padding: 16px;
      border-radius: 8px;
      text-align: center;
    }
    .vital-card.warning {
      background: linear-gradient(135deg, #fef3c7 0%, #fffbeb 100%);
    }
    .vital-card.danger {
      background: linear-gradient(135deg, #fee2e2 0%, #fef2f2 100%);
    }
    .vital-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }
    .vital-value {
      font-size: 24px;
      font-weight: 700;
      color: #257E53;
    }
    .vital-card.warning .vital-value { color: #f59e0b; }
    .vital-card.danger .vital-value { color: #ef4444; }
    .vital-label {
      font-size: 11px;
      color: #666;
      margin-top: 4px;
    }
    
    .detail-map-container {
      height: 200px;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 12px;
    }
    
    .activity-list {
      max-height: 200px;
      overflow-y: auto;
    }
    .activity-item {
      display: flex;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #f3f4f6;
      gap: 10px;
    }
    .activity-item:last-child { border-bottom: none; }
    .activity-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #43E396;
    }
    .activity-dot.warning { background: #f59e0b; }
    .activity-dot.error { background: #ef4444; }
    .activity-time {
      font-size: 11px;
      color: #999;
      width: 50px;
    }
    .activity-text {
      flex: 1;
      font-size: 13px;
    }

    .stimulator-info {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 8px;
      padding: 16px;
    }
    .stimulator-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }
    .stimulator-icon {
      width: 40px;
      height: 40px;
      background: #257E53;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
    }
    .stimulator-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      font-size: 12px;
    }

    /* Custom Map Markers */
    .marker-label {
      background: white;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 10px;
      font-weight: 600;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
      white-space: nowrap;
    }

    @media (max-width: 1200px) {
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
      .col-3, .col-4, .col-5 { width: 50%; }
      .detail-panel { width: 100%; right: -100%; }
    }
    @media (max-width: 768px) {
      .nav-drawer { display: none; }
      .main-content { margin-left: 0; }
      .stats-grid { grid-template-columns: 1fr; }
      .col-3, .col-4, .col-5, .col-6 { width: 100%; }
    }
  </style>
</head>
<body>
  <!-- Navigation Drawer -->
  <nav class="nav-drawer">
    <div class="nav-logo">Wellsafer</div>
    <ul class="nav-menu">
      <li onclick="showPage('dashboard')" id="menu-dashboard" class="active">ëŒ€ì‹œë³´ë“œ</li>
      <li onclick="showPage('nervestim')" id="menu-nervestim">ì‹ ê²½ìê·¹ ê´€ë¦¬</li>
      <li onclick="showPage('bloodpressure')" id="menu-bloodpressure">í˜ˆì•• ê´€ë¦¬</li>
      <li onclick="showPage('report')" id="menu-report">ê±´ê°• ë¦¬í¬íŠ¸</li>
      <li onclick="showPage('device')" id="menu-device">ê¸°ê¸° ê´€ë¦¬</li>
      <li onclick="showPage('band')" id="menu-band">ë°´ë“œ ì¡°íšŒ</li>
      <li onclick="showPage('user')" id="menu-user">ì‚¬ìš©ì</li>
    </ul>
    <div class="nav-footer">
      <button>My Page</button>
      <button>Logout</button>
    </div>
  </nav>

  <!-- Band Detail Overlay -->
  <div class="detail-overlay" id="detail-overlay" onclick="closeBandDetail()"></div>
  
  <!-- Band Detail Panel -->
  <div class="detail-panel" id="detail-panel">
    <div class="detail-header">
      <h2 id="detail-title">ë°´ë“œ ìƒì„¸ ì •ë³´</h2>
      <button class="btn-close" onclick="closeBandDetail()">Ã—</button>
    </div>
    <div class="detail-body">
      <!-- ê¸°ë³¸ ì •ë³´ -->
      <div class="detail-section">
        <div class="detail-section-title">ê¸°ë³¸ ì •ë³´</div>
        <div class="detail-info-grid">
          <div class="detail-info-item">
            <div class="detail-info-label">ë°´ë“œ ID</div>
            <div class="detail-info-value" id="detail-band-id">WS-2024-0001</div>
          </div>
          <div class="detail-info-item">
            <div class="detail-info-label">ì‚¬ìš©ì</div>
            <div class="detail-info-value" id="detail-user-name">ê¹€ì˜í¬</div>
          </div>
          <div class="detail-info-item">
            <div class="detail-info-label">IMEI</div>
            <div class="detail-info-value" id="detail-imei">356789012340001</div>
          </div>
          <div class="detail-info-item">
            <div class="detail-info-label">íŒì›¨ì–´</div>
            <div class="detail-info-value" id="detail-firmware">v2.1.4</div>
          </div>
        </div>
      </div>

      <!-- ì‹¤ì‹œê°„ ìƒì²´ì‹ í˜¸ -->
      <div class="detail-section">
        <div class="detail-section-title">ì‹¤ì‹œê°„ ìƒì²´ì‹ í˜¸</div>
        <div class="vitals-grid">
          <div class="vital-card" id="vital-hr-card">
            <div class="vital-icon">â¤ï¸</div>
            <div class="vital-value" id="detail-hr">72</div>
            <div class="vital-label">ì‹¬ë°•ìˆ˜ (BPM)</div>
          </div>
          <div class="vital-card" id="vital-spo2-card">
            <div class="vital-icon">ğŸ«</div>
            <div class="vital-value" id="detail-spo2">98%</div>
            <div class="vital-label">SpO2</div>
          </div>
          <div class="vital-card" id="vital-bp-card">
            <div class="vital-icon">ğŸ©º</div>
            <div class="vital-value" id="detail-bp">128/82</div>
            <div class="vital-label">í˜ˆì•• (ì¶”ì •)</div>
          </div>
        </div>
        <div style="margin-top: 12px;">
          <div class="detail-info-grid">
            <div class="detail-info-item">
              <div class="detail-info-label">HRV (SDNN)</div>
              <div class="detail-info-value" id="detail-hrv">45 ms</div>
            </div>
            <div class="detail-info-item">
              <div class="detail-info-label">ìŠ¤íŠ¸ë ˆìŠ¤ ì§€ìˆ˜</div>
              <div class="detail-info-value" id="detail-stress">32</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ê¸°ê¸° ìƒíƒœ -->
      <div class="detail-section">
        <div class="detail-section-title">ê¸°ê¸° ìƒíƒœ</div>
        <div class="detail-info-grid">
          <div class="detail-info-item">
            <div class="detail-info-label">ì—°ê²° ìƒíƒœ</div>
            <div class="detail-info-value">
              <span class="chip chip-success" id="detail-status">ì—°ê²°ë¨</span>
            </div>
          </div>
          <div class="detail-info-item">
            <div class="detail-info-label">ë°°í„°ë¦¬</div>
            <div class="detail-info-value" id="detail-battery">
              <div style="display: flex; align-items: center; gap: 8px;">
                <div class="battery-bar" style="width: 80px;">
                  <div class="battery-fill" id="detail-battery-fill" style="width: 85%; background: #10b981;"></div>
                </div>
                <span id="detail-battery-text">85%</span>
              </div>
            </div>
          </div>
          <div class="detail-info-item">
            <div class="detail-info-label">ì‹ í˜¸ ê°•ë„</div>
            <div class="detail-info-value" id="detail-signal">-65 dBm (ì–‘í˜¸)</div>
          </div>
          <div class="detail-info-item">
            <div class="detail-info-label">ë§ˆì§€ë§‰ ë™ê¸°í™”</div>
            <div class="detail-info-value" id="detail-sync">ë°©ê¸ˆ ì „</div>
          </div>
        </div>
      </div>

      <!-- ì—°ê²°ëœ ì‹ ê²½ìê·¹ê¸° -->
      <div class="detail-section">
        <div class="detail-section-title">ì—°ê²°ëœ ì‹ ê²½ìê·¹ê¸°</div>
        <div class="stimulator-info" id="stimulator-section">
          <div class="stimulator-header">
            <div class="stimulator-icon"><i class="mdi mdi-flash"></i></div>
            <div>
              <div style="font-weight: 600;" id="detail-stim-id">NS-2024-0001</div>
              <div style="font-size: 11px; color: #666;" id="detail-stim-mac">MAC: AA:BB:CC:DD:01:01</div>
            </div>
            <span class="chip chip-success" style="margin-left: auto;" id="detail-stim-status">ì—°ê²°ë¨</span>
          </div>
          <div class="stimulator-details">
            <div><span style="color: #666;">ë°°í„°ë¦¬:</span> <span id="detail-stim-battery">92%</span></div>
            <div><span style="color: #666;">ì˜¤ëŠ˜ ì„¸ì…˜:</span> <span id="detail-stim-sessions">2íšŒ</span></div>
            <div><span style="color: #666;">ë§ˆì§€ë§‰ ìê·¹:</span> <span id="detail-stim-last">14:30</span></div>
            <div><span style="color: #666;">í”„ë¡œí† ì½œ:</span> <span id="detail-stim-protocol">í˜ˆì•• ê°•í•˜</span></div>
          </div>
        </div>
        <div id="no-stimulator" style="display: none; text-align: center; padding: 20px; color: #999;">
          ì—°ê²°ëœ ì‹ ê²½ìê·¹ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤
        </div>
      </div>

      <!-- ìœ„ì¹˜ ì •ë³´ -->
      <div class="detail-section">
        <div class="detail-section-title">ìœ„ì¹˜ ì •ë³´</div>
        <div class="detail-map-container">
          <div id="band-detail-map"></div>
        </div>
        <div class="detail-info-grid">
          <div class="detail-info-item">
            <div class="detail-info-label">ì¢Œí‘œ</div>
            <div class="detail-info-value" id="detail-coords" style="font-size: 13px;">36.1194, 128.3446</div>
          </div>
          <div class="detail-info-item">
            <div class="detail-info-label">ìœ„ì¹˜ ìœ í˜•</div>
            <div class="detail-info-value" id="detail-location-type">ì‹¤ì™¸ (GPS)</div>
          </div>
        </div>
      </div>

      <!-- ìµœê·¼ í™œë™ -->
      <div class="detail-section">
        <div class="detail-section-title">ìµœê·¼ í™œë™</div>
        <div class="activity-list" id="activity-list">
        </div>
      </div>

      <!-- ì•¡ì…˜ ë²„íŠ¼ -->
      <div style="display: flex; gap: 12px; margin-top: 20px;">
        <button class="btn btn-primary" style="flex: 1;">ì‹ ê²½ìê·¹ ì‹œì‘</button>
        <button class="btn btn-outline" style="flex: 1;">ë¦¬í¬íŠ¸ ìƒì„±</button>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main-content">
    
    <!-- Dashboard Page -->
    <div id="page-dashboard" class="page active">
      <div class="row">
        <div class="col col-3">
          <div class="card time-card">
            <div class="time-date" id="current-date">2024ë…„ 12ì›” 22ì¼ ì¼ìš”ì¼</div>
            <div class="time-clock" id="current-time">16:32:45</div>
          </div>
        </div>
        <div class="col col-5">
          <div class="card weather-card">
            <div class="weather-main">
              <div class="weather-icon">â˜€ï¸</div>
              <div>
                <div class="weather-temp">-2Â°C</div>
                <div class="weather-desc">ë§‘ìŒ | ì²´ê°ì˜¨ë„ -7Â°C</div>
              </div>
            </div>
            <div class="weather-details">
              <div class="weather-detail-item">
                <div class="weather-detail-value">45%</div>
                <div class="weather-detail-label">ìŠµë„</div>
              </div>
              <div class="weather-detail-item">
                <div class="weather-detail-value">2.3m/s</div>
                <div class="weather-detail-label">í’ì†</div>
              </div>
              <div class="weather-detail-item">
                <div class="weather-detail-value">ì¢‹ìŒ</div>
                <div class="weather-detail-label">ë¯¸ì„¸ë¨¼ì§€</div>
              </div>
            </div>
          </div>
        </div>
        <div class="col col-4">
          <div class="card vitalsign-card">
            <div class="card-header">ìƒì²´ ì‹ í˜¸ ì´ìƒ ê°ì§€</div>
            <div class="vitalsign-list">
              <div class="vitalsign-item">
                <div class="vitalsign-dot danger"></div>
                <div style="flex: 1;">
                  <div style="font-weight: 500; font-size: 13px;">ê¹€ì˜í¬</div>
                  <div style="font-size: 11px; color: #666;">í˜ˆì•• ìƒìŠ¹ - 152/98 mmHg</div>
                </div>
                <span class="chip chip-error">ìœ„í—˜</span>
              </div>
              <div class="vitalsign-item">
                <div class="vitalsign-dot warning"></div>
                <div style="flex: 1;">
                  <div style="font-weight: 500; font-size: 13px;">ë°•ì² ìˆ˜</div>
                  <div style="font-size: 11px; color: #666;">ì‹¬ë°•ìˆ˜ ì´ìƒ - 108 BPM</div>
                </div>
                <span class="chip chip-warning">ì£¼ì˜</span>
              </div>
              <div class="vitalsign-item">
                <div class="vitalsign-dot warning"></div>
                <div style="flex: 1;">
                  <div style="font-weight: 500; font-size: 13px;">ì´ë¯¼ìˆ˜</div>
                  <div style="font-size: 11px; color: #666;">SpO2 ì €í•˜ - 94%</div>
                </div>
                <span class="chip chip-warning">ì£¼ì˜</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col col-12">
          <div class="card map-card">
            <div id="map"></div>

            <div class="map-legend">
              <div class="legend-item">
                <div class="legend-dot" style="background: #257E53;"></div>
                <span>ê´€ë¦¬ì ìœ„ì¹˜</span>
              </div>
              <div class="legend-item">
                <div class="legend-dot" style="background: #43E396;"></div>
                <span>ë°´ë“œ (ì˜¨ë¼ì¸)</span>
              </div>
              <div class="legend-item">
                <div class="legend-dot" style="background: #9ca3af;"></div>
                <span>ë°´ë“œ (ì˜¤í”„ë¼ì¸)</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col col-6">
          <div class="card event-card">
            <div class="card-header">ì´ë²¤íŠ¸ ì´ë ¥</div>
            <div class="event-table-wrap">
              <table class="table">
                <thead>
                  <tr>
                    <th>ì´ë¦„</th>
                    <th>ì´ë²¤íŠ¸</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>ê¹€ì˜í¬</td>
                    <td>ë°°í„°ë¦¬ ì¶©ì „ í•„ìš”</td>
                    <td>15%</td>
                  </tr>
                  <tr>
                    <td>ë°•ì² ìˆ˜</td>
                    <td>ë„¤íŠ¸ì›Œí¬ ì‹ í˜¸ ì•½í•¨</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>ì´ë¯¼ìˆ˜</td>
                    <td>ë¯¸ì°©ìš© ê°ì§€</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>ìµœì§€ì›</td>
                    <td>ë°°í„°ë¦¬ ì”ëŸ‰ ë¶€ì¡±</td>
                    <td>8%</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="col col-6">
          <div class="card chart-card">
            <div class="card-header">ì¼ì£¼ì¼ê°„ ìƒì²´ì‹ í˜¸ ì´ìƒ ê±´ìˆ˜</div>
            <div class="chart-wrap">
              <canvas id="fallChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Nerve Stimulation Page -->
    <div id="page-nervestim" class="page">
      <div class="page-header">
        <h1 class="page-title">ì‹ ê²½ìê·¹ ê´€ë¦¬</h1>
        <button class="btn btn-primary">ìƒˆ ì„¸ì…˜</button>
      </div>

      <div class="stats-grid">
        <div class="stat-card green">
          <div class="stat-icon bg-secondary"><i class="mdi mdi-flash"></i></div>
          <div>
            <div class="stat-value">3</div>
            <div class="stat-label">ì˜¤ëŠ˜ ì„¸ì…˜</div>
          </div>
        </div>
        <div class="stat-card dark-green">
          <div class="stat-icon bg-point2"><i class="mdi mdi-check-circle"></i></div>
          <div>
            <div class="stat-value">12</div>
            <div class="stat-label">ì™„ë£Œëœ ì„¸ì…˜</div>
          </div>
        </div>
        <div class="stat-card light-green">
          <div class="stat-icon bg-thirdly"><i class="mdi mdi-heart-pulse"></i></div>
          <div>
            <div class="stat-value">8 mmHg</div>
            <div class="stat-label">í‰ê·  í˜ˆì•• ê°ì†Œ</div>
          </div>
        </div>
        <div class="stat-card mint">
          <div class="stat-icon bg-point"><i class="mdi mdi-timer"></i></div>
          <div>
            <div class="stat-value">1</div>
            <div class="stat-label">ì§„í–‰ì¤‘</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">ìê·¹ ì œì–´íŒ</div>
        <div class="card-body">
          <div class="row">
            <div class="col col-4">
              <div class="slider-container">
                <div class="slider-label">ì£¼íŒŒìˆ˜ (Hz)</div>
                <div class="slider">
                  <div class="slider-fill" style="width: 50%;"></div>
                  <div class="slider-thumb" style="left: calc(50% - 10px);">25</div>
                </div>
              </div>
            </div>
            <div class="col col-4">
              <div class="slider-container">
                <div class="slider-label">ê°•ë„ (mA)</div>
                <div class="slider">
                  <div class="slider-fill" style="width: 45%;"></div>
                  <div class="slider-thumb" style="left: calc(45% - 10px);">2.5</div>
                </div>
              </div>
            </div>
            <div class="col col-4">
              <div class="slider-container">
                <div class="slider-label">ì§€ì†ì‹œê°„ (ë¶„)</div>
                <div class="slider">
                  <div class="slider-fill" style="width: 40%;"></div>
                  <div class="slider-thumb" style="left: calc(40% - 10px);">15</div>
                </div>
              </div>
            </div>
          </div>
          <div class="row" style="margin-top: 16px;">
            <div class="col col-6">
              <label style="font-size: 12px; color: #666; display: block; margin-bottom: 4px;">ëŒ€ìƒ ì‹ ê²½</label>
              <select style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px;">
                <option>ì •ì¤‘/ì²™ê³¨ì‹ ê²½</option>
                <option>ì •ì¤‘ì‹ ê²½</option>
                <option>ì²™ê³¨ì‹ ê²½</option>
              </select>
            </div>
            <div class="col col-6">
              <label style="font-size: 12px; color: #666; display: block; margin-bottom: 4px;">í”„ë¡œí† ì½œ</label>
              <select style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px;">
                <option>í˜ˆì•• ê°•í•˜ (í‘œì¤€)</option>
                <option>í˜ˆë¥˜ ì•ˆì •í™”</option>
                <option>í†µì¦ ì™„í™”</option>
              </select>
            </div>
          </div>
          <div style="text-align: center; margin-top: 20px;">
            <button class="btn btn-primary" style="padding: 12px 32px; font-size: 14px;">ìê·¹ ì‹œì‘</button>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">ì„¸ì…˜ ê¸°ë¡</div>
        <table class="table">
          <thead>
            <tr>
              <th>ì„¸ì…˜ ID</th>
              <th>ë‚ ì§œ</th>
              <th>ì£¼íŒŒìˆ˜</th>
              <th>ê°•ë„</th>
              <th>ì§€ì†ì‹œê°„</th>
              <th>í˜ˆì•• ë³€í™”</th>
              <th>ìƒíƒœ</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>NS-20241222-001</td>
              <td>2024-12-22 10:00</td>
              <td>25 Hz</td>
              <td>2.5 mA</td>
              <td>15ë¶„</td>
              <td style="color: #10b981;">145 â†’ 132 (-13)</td>
              <td><span class="chip chip-success">ì™„ë£Œ</span></td>
            </tr>
            <tr>
              <td>NS-20241222-002</td>
              <td>2024-12-22 14:30</td>
              <td>20 Hz</td>
              <td>2.0 mA</td>
              <td>10ë¶„</td>
              <td style="color: #10b981;">138 â†’ 128 (-10)</td>
              <td><span class="chip chip-success">ì™„ë£Œ</span></td>
            </tr>
            <tr>
              <td>NS-20241222-003</td>
              <td>2024-12-22 16:00</td>
              <td>25 Hz</td>
              <td>2.5 mA</td>
              <td>-</td>
              <td style="color: #666;">142 â†’ -</td>
              <td><span class="chip chip-warning">ì§„í–‰ì¤‘</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Blood Pressure Page -->
    <div id="page-bloodpressure" class="page">
      <div class="page-header">
        <h1 class="page-title">í˜ˆì•• ê´€ë¦¬</h1>
        <button class="btn btn-primary">í˜ˆì•• ê¸°ë¡</button>
      </div>

      <div class="stats-grid">
        <div class="stat-card green">
          <div>
            <div class="stat-label">í‰ê·  í˜ˆì••</div>
            <div class="stat-value">128/82</div>
            <div class="stat-label">mmHg</div>
          </div>
        </div>
        <div class="stat-card dark-green">
          <div>
            <div class="stat-label">ì•ˆì •í™” ì§€ìˆ˜</div>
            <div class="stat-value" style="color: #10b981;">78</div>
            <div class="stat-label">ì </div>
          </div>
        </div>
        <div class="stat-card light-green">
          <div>
            <div class="stat-label">ì¸¡ì • íšŸìˆ˜</div>
            <div class="stat-value">21</div>
            <div class="stat-label">íšŒ (ìµœê·¼ 7ì¼)</div>
          </div>
        </div>
        <div class="stat-card mint">
          <div>
            <div class="stat-label">ìê·¹ íš¨ê³¼</div>
            <div class="stat-value" style="color: #10b981;">-8</div>
            <div class="stat-label">mmHg í‰ê·  ê°ì†Œ</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
          <span>í˜ˆì•• ì¶”ì´</span>
          <div>
            <button class="btn btn-outline" style="padding: 4px 10px; font-size: 11px;">7ì¼</button>
            <button class="btn btn-outline" style="padding: 4px 10px; font-size: 11px;">14ì¼</button>
            <button class="btn btn-outline" style="padding: 4px 10px; font-size: 11px;">30ì¼</button>
          </div>
        </div>
        <div class="card-body">
          <div class="chart-container" style="height: 250px;">
            <canvas id="bpChart"></canvas>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">ì¸¡ì • ê¸°ë¡</div>
        <table class="table">
          <thead>
            <tr>
              <th>í˜ˆì••</th>
              <th>ë§¥ë°•</th>
              <th>ìƒíƒœ</th>
              <th>ì¸¡ì • ì‹œì </th>
              <th>ì¸¡ì • ì¼ì‹œ</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>128/82</strong> <span style="color: #666; font-size: 11px;">mmHg</span></td>
              <td>72 BPM</td>
              <td><span class="chip chip-success">ì •ìƒ</span></td>
              <td><span class="chip chip-outline">ì¼ë°˜</span></td>
              <td>12/22 10:00</td>
            </tr>
            <tr>
              <td><strong>145/92</strong> <span style="color: #666; font-size: 11px;">mmHg</span></td>
              <td>78 BPM</td>
              <td><span class="chip" style="background: #f97316; color: white;">ê³ í˜ˆì•• 1ê¸°</span></td>
              <td><span class="chip chip-outline">ìê·¹ ì „</span></td>
              <td>12/22 09:45</td>
            </tr>
            <tr>
              <td><strong>132/85</strong> <span style="color: #666; font-size: 11px;">mmHg</span></td>
              <td>70 BPM</td>
              <td><span class="chip chip-warning">ì£¼ì˜</span></td>
              <td><span class="chip chip-secondary">ìê·¹ í›„</span></td>
              <td>12/22 10:15</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Report Page -->
    <div id="page-report" class="page">
      <div class="page-header">
        <h1 class="page-title">ê±´ê°• ë¦¬í¬íŠ¸</h1>
        <button class="btn btn-primary">ë¦¬í¬íŠ¸ ìƒì„±</button>
      </div>

      <div class="row">
        <div class="col col-4">
          <div class="card" style="text-align: center; padding: 30px;">
            <div style="font-size: 13px; color: #666; margin-bottom: 16px;">ì¢…í•© ê±´ê°• ì ìˆ˜</div>
            <div style="position: relative; display: inline-block;">
              <svg width="120" height="120" viewBox="0 0 120 120">
                <circle cx="60" cy="60" r="50" fill="none" stroke="#e5e7eb" stroke-width="10"/>
                <circle cx="60" cy="60" r="50" fill="none" stroke="#257E53" stroke-width="10" 
                  stroke-dasharray="280" stroke-dashoffset="60" transform="rotate(-90 60 60)"/>
              </svg>
              <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 32px; font-weight: 700;">78</div>
            </div>
            <div style="font-size: 11px; color: #666; margin-top: 10px;">ìµœê·¼ 7ì¼ ê¸°ì¤€</div>
          </div>
        </div>
        <div class="col" style="flex: 1;">
          <div class="card" style="padding: 20px;">
            <div style="font-size: 13px; color: #666; margin-bottom: 16px;">ì„¸ë¶€ ì ìˆ˜</div>
            <div style="display: flex; justify-content: space-around; text-align: center;">
              <div>
                <svg width="70" height="70" viewBox="0 0 70 70">
                  <circle cx="35" cy="35" r="28" fill="none" stroke="#e5e7eb" stroke-width="6"/>
                  <circle cx="35" cy="35" r="28" fill="none" stroke="#257E53" stroke-width="6" 
                    stroke-dasharray="176" stroke-dashoffset="31" transform="rotate(-90 35 35)"/>
                </svg>
                <div style="margin-top: -48px; font-size: 16px; font-weight: 600;">82</div>
                <div style="margin-top: 32px; font-size: 11px; color: #666;">í˜ˆì•• ì•ˆì •ì„±</div>
              </div>
              <div>
                <svg width="70" height="70" viewBox="0 0 70 70">
                  <circle cx="35" cy="35" r="28" fill="none" stroke="#e5e7eb" stroke-width="6"/>
                  <circle cx="35" cy="35" r="28" fill="none" stroke="#43E396" stroke-width="6" 
                    stroke-dasharray="176" stroke-dashoffset="49" transform="rotate(-90 35 35)"/>
                </svg>
                <div style="margin-top: -48px; font-size: 16px; font-weight: 600;">72</div>
                <div style="margin-top: 32px; font-size: 11px; color: #666;">HRV</div>
              </div>
              <div>
                <svg width="70" height="70" viewBox="0 0 70 70">
                  <circle cx="35" cy="35" r="28" fill="none" stroke="#e5e7eb" stroke-width="6"/>
                  <circle cx="35" cy="35" r="28" fill="none" stroke="#f59e0b" stroke-width="6" 
                    stroke-dasharray="176" stroke-dashoffset="61" transform="rotate(-90 35 35)"/>
                </svg>
                <div style="margin-top: -48px; font-size: 16px; font-weight: 600;">65</div>
                <div style="margin-top: 32px; font-size: 11px; color: #666;">í™œë™ëŸ‰</div>
              </div>
              <div>
                <svg width="70" height="70" viewBox="0 0 70 70">
                  <circle cx="35" cy="35" r="28" fill="none" stroke="#e5e7eb" stroke-width="6"/>
                  <circle cx="35" cy="35" r="28" fill="none" stroke="#257E53" stroke-width="6" 
                    stroke-dasharray="176" stroke-dashoffset="21" transform="rotate(-90 35 35)"/>
                </svg>
                <div style="margin-top: -48px; font-size: 16px; font-weight: 600;">88</div>
                <div style="margin-top: 32px; font-size: 11px; color: #666;">ìˆ˜ë©´</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">ë¦¬í¬íŠ¸ ëª©ë¡</div>
        <table class="table">
          <thead>
            <tr>
              <th>ë¦¬í¬íŠ¸ ID</th>
              <th>ìœ í˜•</th>
              <th>ê¸°ê°„</th>
              <th>ê±´ê°•ì ìˆ˜</th>
              <th>ìƒì„±ì¼</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>RPT-2024-0012</td>
              <td><span class="chip chip-point2">ì¢…í•©</span></td>
              <td>2024-12-15 ~ 2024-12-22</td>
              <td><span style="color: #10b981; font-weight: 600;">78</span>ì </td>
              <td>2024-12-22</td>
            </tr>
            <tr>
              <td>RPT-2024-0011</td>
              <td><span class="chip chip-secondary">í˜ˆì••</span></td>
              <td>2024-12-08 ~ 2024-12-15</td>
              <td><span style="color: #10b981; font-weight: 600;">82</span>ì </td>
              <td>2024-12-15</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Device Page -->
    <div id="page-device" class="page">
      <div class="page-header">
        <h1 class="page-title">ê¸°ê¸° ê´€ë¦¬</h1>
        <button class="btn btn-primary">ê¸°ê¸° ë“±ë¡</button>
      </div>

      <div class="stats-grid">
        <div class="stat-card green">
          <div class="stat-icon bg-secondary"><i class="mdi mdi-devices"></i></div>
          <div>
            <div class="stat-value">6</div>
            <div class="stat-label">ë“±ë¡ëœ ê¸°ê¸°</div>
          </div>
        </div>
        <div class="stat-card dark-green">
          <div class="stat-icon bg-point2"><i class="mdi mdi-wifi"></i></div>
          <div>
            <div class="stat-value">4</div>
            <div class="stat-label">ì˜¨ë¼ì¸</div>
          </div>
        </div>
        <div class="stat-card orange">
          <div class="stat-icon" style="background: #f59e0b;"><i class="mdi mdi-battery-low"></i></div>
          <div>
            <div class="stat-value">1</div>
            <div class="stat-label">ë°°í„°ë¦¬ ë¶€ì¡±</div>
          </div>
        </div>
        <div class="stat-card red">
          <div class="stat-icon" style="background: #ef4444;"><i class="mdi mdi-alert-circle"></i></div>
          <div>
            <div class="stat-value">0</div>
            <div class="stat-label">ì˜¤ë¥˜</div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col col-6">
          <div class="card">
            <div class="card-header">ìŠ¤ë§ˆíŠ¸ë°´ë“œ (LTE-M)</div>
            <div class="list-item">
              <div class="list-icon" style="background: #d1fae5; color: #10b981;"><i class="mdi mdi-watch"></i></div>
              <div style="flex: 1;">
                <div style="font-weight: 500; font-size: 13px;">WS-2024-0001</div>
                <div style="font-size: 11px; color: #666;">IMEI: 356789012340001 | ë°°í„°ë¦¬: 85%</div>
              </div>
              <span class="chip chip-success">ì—°ê²°</span>
            </div>
            <div class="list-item">
              <div class="list-icon" style="background: #d1fae5; color: #10b981;"><i class="mdi mdi-watch"></i></div>
              <div style="flex: 1;">
                <div style="font-weight: 500; font-size: 13px;">WS-2024-0002</div>
                <div style="font-size: 11px; color: #666;">IMEI: 356789012340002 | ë°°í„°ë¦¬: 62%</div>
              </div>
              <span class="chip chip-success">ì—°ê²°</span>
            </div>
            <div class="list-item">
              <div class="list-icon" style="background: #f3f4f6; color: #9ca3af;"><i class="mdi mdi-watch"></i></div>
              <div style="flex: 1;">
                <div style="font-weight: 500; font-size: 13px;">WS-2024-0003</div>
                <div style="font-size: 11px; color: #666;">IMEI: 356789012340003 | ë°°í„°ë¦¬: 15%</div>
              </div>
              <span class="chip chip-grey">ì˜¤í”„ë¼ì¸</span>
            </div>
          </div>
        </div>
        <div class="col col-6">
          <div class="card">
            <div class="card-header">ì‹ ê²½ìê·¹ê¸° (BLE)</div>
            <div class="list-item">
              <div class="list-icon" style="background: #d1fae5; color: #10b981;"><i class="mdi mdi-flash"></i></div>
              <div style="flex: 1;">
                <div style="font-weight: 500; font-size: 13px;">NS-2024-0001</div>
                <div style="font-size: 11px; color: #666;">MAC: AA:BB:CC:DD:01:01 | ë°°í„°ë¦¬: 92%</div>
              </div>
              <span class="chip chip-success">ì—°ê²°</span>
            </div>
            <div class="list-item">
              <div class="list-icon" style="background: #d1fae5; color: #10b981;"><i class="mdi mdi-flash"></i></div>
              <div style="flex: 1;">
                <div style="font-weight: 500; font-size: 13px;">NS-2024-0002</div>
                <div style="font-size: 11px; color: #666;">MAC: AA:BB:CC:DD:02:02 | ë°°í„°ë¦¬: 78%</div>
              </div>
              <span class="chip chip-success">ì—°ê²°</span>
            </div>
            <div class="list-item">
              <div class="list-icon" style="background: #f3f4f6; color: #9ca3af;"><i class="mdi mdi-flash"></i></div>
              <div style="flex: 1;">
                <div style="font-weight: 500; font-size: 13px;">NS-2024-0003</div>
                <div style="font-size: 11px; color: #666;">MAC: AA:BB:CC:DD:03:03 | ë°°í„°ë¦¬: 45%</div>
              </div>
              <span class="chip chip-grey">ì˜¤í”„ë¼ì¸</span>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">ì „ì²´ ê¸°ê¸° ëª©ë¡</div>
        <table class="table">
          <thead>
            <tr>
              <th>ê¸°ê¸° ID</th>
              <th>ìœ í˜•</th>
              <th>ì‹œë¦¬ì–¼</th>
              <th>ì—°ê²° ë°©ì‹</th>
              <th>ìƒíƒœ</th>
              <th>ë°°í„°ë¦¬</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>WS-2024-0001</td>
              <td><span class="chip chip-secondary">ìŠ¤ë§ˆíŠ¸ë°´ë“œ</span></td>
              <td>SN-BAND-000001</td>
              <td><span class="chip chip-outline">LTE-M</span></td>
              <td><span class="chip chip-success">ì˜¨ë¼ì¸</span></td>
              <td>
                <div style="display: flex; align-items: center; gap: 6px;">
                  <div class="battery-bar"><div class="battery-fill" style="width: 85%; background: #10b981;"></div></div>
                  <span style="font-size: 11px;">85%</span>
                </div>
              </td>
            </tr>
            <tr>
              <td>NS-2024-0001</td>
              <td><span class="chip chip-point2">ì‹ ê²½ìê·¹ê¸°</span></td>
              <td>SN-STIM-000001</td>
              <td><span class="chip chip-outline">BLE</span></td>
              <td><span class="chip chip-success">ì˜¨ë¼ì¸</span></td>
              <td>
                <div style="display: flex; align-items: center; gap: 6px;">
                  <div class="battery-bar"><div class="battery-fill" style="width: 92%; background: #10b981;"></div></div>
                  <span style="font-size: 11px;">92%</span>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Band Page -->
    <div id="page-band" class="page">
      <div class="page-header">
        <h1 class="page-title">ë°´ë“œ ì¡°íšŒ</h1>
        <div>
          <button class="btn btn-outline" style="margin-right: 4px;">ë¦¬ìŠ¤íŠ¸</button>
          <button class="btn btn-primary">ë…¸ë“œ</button>
        </div>
      </div>

      <div class="card">
        <table class="table">
          <thead>
            <tr>
              <th>No.</th>
              <th>ë°´ë“œ ID</th>
              <th>ì‚¬ìš©ì</th>
              <th>ìƒíƒœ</th>
              <th>ì‹¬ë°•ìˆ˜</th>
              <th>SpO2</th>
              <th>ë°°í„°ë¦¬</th>
              <th>ë§ˆì§€ë§‰ ì—°ê²°</th>
            </tr>
          </thead>
          <tbody>
            <tr class="clickable" onclick="openBandDetail(0)">
              <td>1</td>
              <td>WS-2024-0001</td>
              <td>ê¹€ì˜í¬</td>
              <td><span class="chip chip-success">ì—°ê²°</span></td>
              <td>72 BPM</td>
              <td>98%</td>
              <td>
                <div style="display: flex; align-items: center; gap: 6px;">
                  <div class="battery-bar"><div class="battery-fill" style="width: 85%; background: #10b981;"></div></div>
                  <span style="font-size: 11px;">85%</span>
                </div>
              </td>
              <td>ë°©ê¸ˆ ì „</td>
            </tr>
            <tr class="clickable" onclick="openBandDetail(1)">
              <td>2</td>
              <td>WS-2024-0002</td>
              <td>ë°•ì² ìˆ˜</td>
              <td><span class="chip chip-success">ì—°ê²°</span></td>
              <td>108 BPM</td>
              <td>97%</td>
              <td>
                <div style="display: flex; align-items: center; gap: 6px;">
                  <div class="battery-bar"><div class="battery-fill" style="width: 62%; background: #f59e0b;"></div></div>
                  <span style="font-size: 11px;">62%</span>
                </div>
              </td>
              <td>2ë¶„ ì „</td>
            </tr>
            <tr class="clickable" onclick="openBandDetail(2)">
              <td>3</td>
              <td>WS-2024-0003</td>
              <td>ì´ë¯¼ìˆ˜</td>
              <td><span class="chip chip-grey">ì˜¤í”„ë¼ì¸</span></td>
              <td>-</td>
              <td>-</td>
              <td>
                <div style="display: flex; align-items: center; gap: 6px;">
                  <div class="battery-bar"><div class="battery-fill" style="width: 15%; background: #ef4444;"></div></div>
                  <span style="font-size: 11px; color: #ef4444;">15%</span>
                </div>
              </td>
              <td>2ì‹œê°„ ì „</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- User Page -->
    <div id="page-user" class="page">
      <div class="page-header">
        <h1 class="page-title">ì‚¬ìš©ì</h1>
        <button class="btn btn-primary">ì‚¬ìš©ì ì¶”ê°€</button>
      </div>

      <div class="card">
        <table class="table">
          <thead>
            <tr>
              <th>No.</th>
              <th>ì•„ì´ë””</th>
              <th>ì´ë¦„</th>
              <th>ê¶Œí•œ</th>
              <th>ì—°ê²°ëœ ë°´ë“œ</th>
              <th>ìƒíƒœ</th>
              <th>ë§ˆì§€ë§‰ ë¡œê·¸ì¸</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>admin</td>
              <td>ê´€ë¦¬ì</td>
              <td><span class="chip" style="background: #ef4444; color: white;">ê´€ë¦¬ì</span></td>
              <td>-</td>
              <td><span class="chip chip-success">í™œì„±</span></td>
              <td>2024-12-22 09:00</td>
            </tr>
            <tr>
              <td>2</td>
              <td>operator01</td>
              <td>ê¹€ìš´ì˜</td>
              <td><span class="chip" style="background: #f97316; color: white;">ìš´ì˜ì</span></td>
              <td>-</td>
              <td><span class="chip chip-success">í™œì„±</span></td>
              <td>2024-12-22 08:30</td>
            </tr>
            <tr>
              <td>3</td>
              <td>user001</td>
              <td>ê¹€ì˜í¬</td>
              <td><span class="chip chip-info">ì‚¬ìš©ì</span></td>
              <td>WS-2024-0001</td>
              <td><span class="chip chip-success">í™œì„±</span></td>
              <td>2024-12-22 10:15</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </main>

  <script>
    // ê²½ë¶ êµ¬ë¯¸ì‹œ ì‚°í˜¸ëŒ€ë¡œ 253 ì¢Œí‘œ
    const GUMI_LAT = 36.1194;
    const GUMI_LNG = 128.3446;

    // Band Data - êµ¬ë¯¸ ì‚°í˜¸ëŒ€ë¡œ 253 ê·¼ì²˜ ìœ„ì¹˜ ì„¤ì •
    const bandsData = [
      {
        id: 'WS-2024-0001',
        user: 'ê¹€ì˜í¬',
        imei: '356789012340001',
        firmware: 'v2.1.4',
        hr: 72,
        spo2: '98%',
        bp: '128/82',
        hrv: '45 ms',
        stress: 32,
        status: 'online',
        battery: 85,
        signal: '-65 dBm (ì–‘í˜¸)',
        sync: 'ë°©ê¸ˆ ì „',
        stimulator: {
          id: 'NS-2024-0001',
          mac: 'AA:BB:CC:DD:01:01',
          status: 'online',
          battery: 92,
          sessions: 2,
          lastStim: '14:30',
          protocol: 'í˜ˆì•• ê°•í•˜'
        },
        coords: [36.1200, 128.3460],  // ì‚°í˜¸ëŒ€ë¡œ ê·¼ì²˜ - ë™ìª½
        locationType: 'ì‹¤ì™¸ (GPS)',
        activities: [
          { time: '16:30', text: 'ì‹ ê²½ìê·¹ ì„¸ì…˜ ì™„ë£Œ (15ë¶„)', type: 'success' },
          { time: '16:15', text: 'í˜ˆì•• ìƒìŠ¹ ê°ì§€ (145/92)', type: 'warning' },
          { time: '16:00', text: 'ì‹ ê²½ìê·¹ ì„¸ì…˜ ì‹œì‘', type: 'success' },
          { time: '14:30', text: 'ê±¸ìŒ ìˆ˜ ëª©í‘œ ë‹¬ì„± (10,000ë³´)', type: 'success' },
          { time: '12:00', text: 'ì ì‹¬ í™œë™ëŸ‰ ì¸¡ì •', type: 'success' }
        ]
      },
      {
        id: 'WS-2024-0002',
        user: 'ë°•ì² ìˆ˜',
        imei: '356789012340002',
        firmware: 'v2.1.3',
        hr: 108,
        spo2: '97%',
        bp: '142/90',
        hrv: '32 ms',
        stress: 58,
        status: 'online',
        battery: 62,
        signal: '-72 dBm (ë³´í†µ)',
        sync: '2ë¶„ ì „',
        stimulator: {
          id: 'NS-2024-0002',
          mac: 'AA:BB:CC:DD:02:02',
          status: 'online',
          battery: 78,
          sessions: 1,
          lastStim: '10:00',
          protocol: 'í˜ˆë¥˜ ì•ˆì •í™”'
        },
        coords: [36.1180, 128.3430],  // ì‚°í˜¸ëŒ€ë¡œ ê·¼ì²˜ - ì„œìª½
        locationType: 'ì‹¤ì™¸ (GPS)',
        activities: [
          { time: '16:28', text: 'ì‹¬ë°•ìˆ˜ ì´ìƒ ê°ì§€ (108 BPM)', type: 'warning' },
          { time: '15:00', text: 'ìš´ë™ ì‹œì‘ (ê±·ê¸°)', type: 'success' },
          { time: '10:15', text: 'ì‹ ê²½ìê·¹ ì„¸ì…˜ ì™„ë£Œ', type: 'success' },
          { time: '10:00', text: 'ì‹ ê²½ìê·¹ ì„¸ì…˜ ì‹œì‘', type: 'success' }
        ]
      },
      {
        id: 'WS-2024-0003',
        user: 'ì´ë¯¼ìˆ˜',
        imei: '356789012340003',
        firmware: 'v2.1.2',
        hr: null,
        spo2: null,
        bp: null,
        hrv: null,
        stress: null,
        status: 'offline',
        battery: 15,
        signal: 'ì—°ê²° ëŠê¹€',
        sync: '2ì‹œê°„ ì „',
        stimulator: null,
        coords: [36.1210, 128.3420],  // ì‚°í˜¸ëŒ€ë¡œ ê·¼ì²˜ - ë¶ì„œìª½
        locationType: 'ë§ˆì§€ë§‰ ìœ„ì¹˜ (GPS)',
        activities: [
          { time: '14:30', text: 'ì—°ê²° ëŠê¹€', type: 'error' },
          { time: '14:25', text: 'ë°°í„°ë¦¬ ë¶€ì¡± ê²½ê³  (15%)', type: 'warning' },
          { time: '12:00', text: 'ì ì‹¬ í™œë™ëŸ‰ ì¸¡ì •', type: 'success' }
        ]
      }
    ];

    // Map Variables
    let map = null;
    let bandDetailMap = null;
    let adminMarker = null;
    let bandMarkers = [];

    // Initialize Main Map
    function initMap() {
      // êµ¬ë¯¸ ì‚°í˜¸ëŒ€ë¡œ 253 ì¤‘ì‹¬ìœ¼ë¡œ ì§€ë„ ìƒì„±
      map = L.map('map').setView([GUMI_LAT, GUMI_LNG], 16);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap contributors',
        maxZoom: 19
      }).addTo(map);

      // ê´€ë¦¬ì ìœ„ì¹˜ ë§ˆì»¤ (ì‚°í˜¸ëŒ€ë¡œ 253)
      const adminIcon = L.divIcon({
        className: 'admin-marker',
        iconSize: [24, 24],
        iconAnchor: [12, 12],
        html: '<div style="width:24px;height:24px;background:#257E53;border:3px solid white;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.4);"></div>'
      });

      adminMarker = L.marker([GUMI_LAT, GUMI_LNG], { icon: adminIcon })
        .addTo(map)
        .bindPopup('<b>ğŸ“ ê´€ë¦¬ì ìœ„ì¹˜</b><br>ê²½ë¶ êµ¬ë¯¸ì‹œ ì‚°í˜¸ëŒ€ë¡œ 253')
        .openPopup();

      // ë°´ë“œ ë§ˆì»¤ ì¶”ê°€
      addBandMarkers();
    }

    function addBandMarkers() {
      bandsData.forEach((band, index) => {
        const isOnline = band.status === 'online';
        
        // ë§ˆì»¤ ì•„ì´ì½˜
        const bandIcon = L.divIcon({
          className: 'band-marker',
          iconSize: [18, 18],
          iconAnchor: [9, 9],
          html: isOnline 
            ? '<div style="width:18px;height:18px;background:#43E396;border:3px solid white;border-radius:50%;box-shadow:0 2px 6px rgba(0,0,0,0.3);"></div>'
            : '<div style="width:18px;height:18px;background:#9ca3af;border:3px solid white;border-radius:50%;box-shadow:0 2px 6px rgba(0,0,0,0.3);"></div>'
        });

        const marker = L.marker(band.coords, { icon: bandIcon })
          .addTo(map)
          .bindPopup(`
            <div style="min-width: 150px;">
              <div style="font-weight: 600; font-size: 14px; margin-bottom: 4px;">${band.user}</div>
              <div style="color: #666; font-size: 11px; margin-bottom: 6px;">${band.id}</div>
              <div style="border-top: 1px solid #eee; padding-top: 6px;">
                ${isOnline 
                  ? `<span style="color: #10b981;">â— ì—°ê²°ë¨</span><br>
                     <span style="font-size: 12px;">â¤ï¸ ${band.hr} BPM | ğŸ« ${band.spo2}</span><br>
                     <span style="font-size: 12px;">ğŸ©º ${band.bp} mmHg</span>`
                  : '<span style="color: #9ca3af;">â— ì˜¤í”„ë¼ì¸</span><br><span style="font-size: 11px; color: #999;">ë§ˆì§€ë§‰ ìœ„ì¹˜</span>'
                }
              </div>
              <div style="margin-top: 8px;">
                <button onclick="openBandDetail(${index})" style="background: #257E53; color: white; border: none; padding: 4px 10px; border-radius: 4px; font-size: 11px; cursor: pointer;">ìƒì„¸ ë³´ê¸°</button>
              </div>
            </div>
          `);

        // ë§ˆì»¤ì— ë¼ë²¨ ì¶”ê°€
        const labelIcon = L.divIcon({
          className: 'marker-label-icon',
          iconSize: [60, 20],
          iconAnchor: [30, -5],
          html: `<div class="marker-label" style="background: ${isOnline ? '#257E53' : '#9ca3af'}; color: white;">${band.user}</div>`
        });
        
        const label = L.marker(band.coords, { icon: labelIcon, interactive: false }).addTo(map);

        bandMarkers.push({ marker, label });
      });
    }

    // Band Detail Panel
    function openBandDetail(index) {
      const band = bandsData[index];
      
      // Update basic info
      document.getElementById('detail-title').textContent = `${band.user} - ${band.id}`;
      document.getElementById('detail-band-id').textContent = band.id;
      document.getElementById('detail-user-name').textContent = band.user;
      document.getElementById('detail-imei').textContent = band.imei;
      document.getElementById('detail-firmware').textContent = band.firmware;

      // Update vitals
      const hrCard = document.getElementById('vital-hr-card');
      const spo2Card = document.getElementById('vital-spo2-card');
      const bpCard = document.getElementById('vital-bp-card');
      
      if (band.status === 'online') {
        document.getElementById('detail-hr').textContent = band.hr;
        document.getElementById('detail-spo2').textContent = band.spo2;
        document.getElementById('detail-bp').textContent = band.bp;
        document.getElementById('detail-hrv').textContent = band.hrv;
        document.getElementById('detail-stress').textContent = band.stress;

        hrCard.className = 'vital-card';
        if (band.hr > 100) hrCard.className = 'vital-card warning';
        if (band.hr > 120) hrCard.className = 'vital-card danger';

        bpCard.className = 'vital-card';
        const systolic = parseInt(band.bp.split('/')[0]);
        if (systolic >= 140) bpCard.className = 'vital-card warning';
        if (systolic >= 160) bpCard.className = 'vital-card danger';
      } else {
        document.getElementById('detail-hr').textContent = '-';
        document.getElementById('detail-spo2').textContent = '-';
        document.getElementById('detail-bp').textContent = '-';
        document.getElementById('detail-hrv').textContent = '-';
        document.getElementById('detail-stress').textContent = '-';
        hrCard.className = 'vital-card';
        spo2Card.className = 'vital-card';
        bpCard.className = 'vital-card';
      }

      // Update device status
      document.getElementById('detail-status').textContent = band.status === 'online' ? 'ì—°ê²°ë¨' : 'ì˜¤í”„ë¼ì¸';
      document.getElementById('detail-status').className = band.status === 'online' ? 'chip chip-success' : 'chip chip-grey';
      
      const batteryFill = document.getElementById('detail-battery-fill');
      batteryFill.style.width = band.battery + '%';
      batteryFill.style.background = band.battery > 50 ? '#10b981' : (band.battery > 20 ? '#f59e0b' : '#ef4444');
      document.getElementById('detail-battery-text').textContent = band.battery + '%';
      
      document.getElementById('detail-signal').textContent = band.signal;
      document.getElementById('detail-sync').textContent = band.sync;

      // Update stimulator info
      if (band.stimulator) {
        document.getElementById('stimulator-section').style.display = 'block';
        document.getElementById('no-stimulator').style.display = 'none';
        document.getElementById('detail-stim-id').textContent = band.stimulator.id;
        document.getElementById('detail-stim-mac').textContent = 'MAC: ' + band.stimulator.mac;
        document.getElementById('detail-stim-status').textContent = band.stimulator.status === 'online' ? 'ì—°ê²°ë¨' : 'ì˜¤í”„ë¼ì¸';
        document.getElementById('detail-stim-battery').textContent = band.stimulator.battery + '%';
        document.getElementById('detail-stim-sessions').textContent = band.stimulator.sessions + 'íšŒ';
        document.getElementById('detail-stim-last').textContent = band.stimulator.lastStim;
        document.getElementById('detail-stim-protocol').textContent = band.stimulator.protocol;
      } else {
        document.getElementById('stimulator-section').style.display = 'none';
        document.getElementById('no-stimulator').style.display = 'block';
      }

      // Update location
      document.getElementById('detail-coords').textContent = band.coords[0].toFixed(4) + ', ' + band.coords[1].toFixed(4);
      document.getElementById('detail-location-type').textContent = band.locationType;

      // Update activities
      const activityList = document.getElementById('activity-list');
      activityList.innerHTML = band.activities.map(a => `
        <div class="activity-item">
          <div class="activity-dot ${a.type === 'warning' ? 'warning' : (a.type === 'error' ? 'error' : '')}"></div>
          <div class="activity-time">${a.time}</div>
          <div class="activity-text">${a.text}</div>
        </div>
      `).join('');

      // Show panel
      document.getElementById('detail-overlay').classList.add('active');
      document.getElementById('detail-panel').classList.add('active');

      // Initialize detail map
      setTimeout(() => {
        if (bandDetailMap) {
          bandDetailMap.remove();
        }
        bandDetailMap = L.map('band-detail-map').setView(band.coords, 17);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '',
          maxZoom: 19
        }).addTo(bandDetailMap);

        const markerIcon = L.divIcon({
          className: 'band-marker',
          iconSize: [20, 20],
          iconAnchor: [10, 10],
          html: band.status === 'online' 
            ? '<div style="width:20px;height:20px;background:#43E396;border:3px solid white;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.4);"></div>'
            : '<div style="width:20px;height:20px;background:#9ca3af;border:3px solid white;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.4);"></div>'
        });
        L.marker(band.coords, { icon: markerIcon }).addTo(bandDetailMap)
          .bindPopup(`<b>${band.user}</b><br>${band.id}`).openPopup();
      }, 100);
    }

    function closeBandDetail() {
      document.getElementById('detail-overlay').classList.remove('active');
      document.getElementById('detail-panel').classList.remove('active');
      if (bandDetailMap) {
        bandDetailMap.remove();
        bandDetailMap = null;
      }
    }

    // Page Navigation
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
      document.getElementById('page-' + pageId).classList.add('active');
      
      document.querySelectorAll('.nav-menu li').forEach(item => item.classList.remove('active'));
      document.getElementById('menu-' + pageId).classList.add('active');

      if (pageId === 'bloodpressure') initBpChart();
      if (pageId === 'dashboard') {
        initFallChart();
        setTimeout(() => { if (map) map.invalidateSize(); }, 100);
      }
    }

    // Update Time
    function updateTime() {
      const now = new Date();
      const days = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
      const dateStr = `${now.getFullYear()}ë…„ ${now.getMonth() + 1}ì›” ${now.getDate()}ì¼ ${days[now.getDay()]}ìš”ì¼`;
      const timeStr = now.toLocaleTimeString('ko-KR', { hour12: false });
      
      document.getElementById('current-date').textContent = dateStr;
      document.getElementById('current-time').textContent = timeStr;
    }
    setInterval(updateTime, 1000);
    updateTime();

    // Charts
    let fallChart = null;
    function initFallChart() {
      const ctx = document.getElementById('fallChart');
      if (!ctx) return;
      if (fallChart) fallChart.destroy();

      fallChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['12/16', '12/17', '12/18', '12/19', '12/20', '12/21', '12/22'],
          datasets: [{
            label: 'ì´ìƒ ê±´ìˆ˜',
            data: [3, 5, 2, 4, 3, 6, 2],
            backgroundColor: '#43E396',
            borderRadius: 4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            y: { beginAtZero: true, grid: { color: '#f3f4f6' } },
            x: { grid: { display: false } }
          }
        }
      });
    }

    let bpChart = null;
    function initBpChart() {
      const ctx = document.getElementById('bpChart');
      if (!ctx) return;
      if (bpChart) bpChart.destroy();

      bpChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['12/16', '12/17', '12/18', '12/19', '12/20', '12/21', '12/22'],
          datasets: [
            {
              label: 'ìˆ˜ì¶•ê¸°',
              data: [138, 142, 135, 140, 132, 128, 130],
              borderColor: '#257E53',
              backgroundColor: 'rgba(37, 126, 83, 0.1)',
              fill: true,
              tension: 0.4,
              borderWidth: 2
            },
            {
              label: 'ì´ì™„ê¸°',
              data: [88, 90, 85, 88, 82, 80, 82],
              borderColor: '#43E396',
              backgroundColor: 'rgba(67, 227, 150, 0.1)',
              fill: true,
              tension: 0.4,
              borderWidth: 2
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { position: 'top' } },
          scales: {
            y: { beginAtZero: false, min: 60, max: 160, grid: { color: '#f3f4f6' } },
            x: { grid: { display: false } }
          }
        }
      });
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      initMap();
      initFallChart();
    });

    // Close panel with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') closeBandDetail();
    });
  </script>
</body>
</html>
